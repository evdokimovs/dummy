language: rust

jobs:
    include:
        - stage: lints
          rust: stable 
          name: "Clippy"
          before_script: rustup component add clippy
          script: cargo clippy

        - stage: lints
          rust: nightly
          name: "Rustfmt"
          before_script: rustup component add rustfmt
          script: cargo fmt -- --check

        - stage: build
          rust: stable
          name: "Build app on stable rust"
          script: cargo build

        - stage: build
          rust: beta
          name: "Build app on beta rust"
          script: cargo build

        - stage: build
          rust: nightly
          name: "Build app on nightly rust"
          script: cargo build

        - stage: test
          name: "Unit tests on stable"
          script: cargo test

        - stage: test
          name: "Unit tests on beta rust"

install:
    - rustc -vV
    - cargo -vV
